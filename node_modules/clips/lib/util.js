'use strict';
var Q =  require('q');
var request = require('request');

exports.getUser = function *(token, url) {
  var defer = Q.defer();
  request.get({
    url: url,
    headers: {
      Authorization: 'token ' + token,
      'user-agent': 'node.js'
    }
  }, function (err, res, data) {
    var data = JSON.parse(data);
    defer.resolve(data);
  });

  return defer.promise;
};
